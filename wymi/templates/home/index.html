{% extends "base.html" %}

{% block content %}
  <section id="appview" class="row">
    <a href="#" id="refreshLoc" class="btn"><i class="icon-refresh"></i>Refresh</a>
    <div class="span6">
      <ul id="facility-list" class="nav nav-tabs nav-stacked"></ul>
    </div>
    <div class="span6">
      <div id="map" class="well"></div>
    </div>
  </section>
{% endblock content %}

{% block templates %}

<script type="text/template" id="facilityListItem">
  <a>
  <h3><%= fac.name %></h3>
  <span class="score"><%= fac.latest_score %></span>
  <% if(fac.distance){ %>
  <span class="distance"><%= fac.distance %></span>
  <%
  }
  // different colors for score%
  // 'progress-success'
  // 'progress-warning'
  // 'progress-danger'
  var colorClass = 'progress-success'
  %>
  <div class="progress <%= colorClass %>"><div class="bar" style="width: <%= fac.latest_score%>%"></div></div>
  <% if(display_address){ %>
  <address><%= fac.address %></address>
  <% } %>
  </a>
</script>
  
<script type="text/template" id="facilityDetail">
  detail
</script>

{% endblock templates %}

{% block additional_js %}
<script src="http://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js?key=Fmjtd%7Cluua2qubll%2Cax%3Do5-hztwd"></script>
<script src="{{ STATIC_URL }}js/underscore.js"></script>
<script src="{{ STATIC_URL }}js/backbone.js"></script>
<script src="{{ STATIC_URL }}js/main.js"></script>
<script src="{{ STATIC_URL }}js/map.js"></script>
{% endblock additional_js %}
